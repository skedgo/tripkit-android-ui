apply plugin: 'com.android.library'
apply plugin: 'digital.wup.android-maven-publish'
apply plugin: "kotlin-android"
apply plugin: "kotlin-kapt"
apply plugin: 'kotlin-android-extensions'
apply plugin: 'org.jetbrains.dokka'

repositories {
    maven { url "https://raw.github.com/laenger/maven-releases/master/releases" }
}
android {
    compileSdkVersion versions.compileSdkVersion
    defaultConfig {
        minSdkVersion versions.proMinSdkVersion
        targetSdkVersion versions.targetSdkVersion
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        vectorDrawables.useSupportLibrary = true
    }

    packagingOptions {
        // To avoid conflicts with ASL.
        // We don't utilize ServiceLoader, so this is unneeded.
        exclude 'META-INF/services/com.google.gson.TypeAdapterFactory'
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    testOptions {
        unitTests {
            includeAndroidResources = true
        }
    }

    dataBinding {
        enabled = true
    }

    dexOptions { preDexLibraries = true } // To enable build-cache.

    lintOptions {
        checkReleaseBuilds true
        abortOnError false
    }
}

dependencies {
    implementation 'com.google.android.material:material:1.0.0'
    implementation libs.koptional
    implementation libs.kotlin
    implementation 'androidx.appcompat:appcompat:1.1.0'
    implementation libs.constraintLayout
    implementation "com.google.android.libraries.places:places-compat:2.1.0"
    implementation("com.squareup.okhttp3:logging-interceptor:4.2.0")

    implementation 'androidx.legacy:legacy-support-v4:1.0.0'
    implementation 'androidx.lifecycle:lifecycle-extensions:2.1.0'
    implementation 'androidx.lifecycle:lifecycle-viewmodel-ktx:2.1.0'
    implementation 'com.google.android:flexbox:1.1.1'
    implementation 'com.github.skedgo:wheel:v1.0'

    implementation libs.roomRuntime
    kapt libs.roomCompiler
    implementation libs.roomRxjava2

    kapt libs.value
    compileOnly libs.valueAnnotations

    api 'com.trello.rxlifecycle3:rxlifecycle:3.0.0'
    implementation 'com.squareup:otto:1.3.8'
    implementation 'com.squareup.picasso:picasso:2.71828'
    implementation libs.retrofit
    implementation libs.retrofitAdapterRxJava
    implementation libs.retrofitConverterGson
    implementation libs.playServicesMaps
    implementation 'com.google.maps.android:android-maps-utils:0.5'

    implementation libs.rxAndroid2
    implementation libs.rxjava2
    implementation libs.rxrelay2
    implementation libs.rxkotlin
    implementation libs.jodaTimeAndroid
    implementation 'com.github.skedgo:RxProperty:1.6'
    api "com.uber.rxdogtag:rxdogtag:0.3.0"
    implementation 'com.jakewharton.rxbinding3:rxbinding:3.0.0'
    implementation 'androidx.viewpager:viewpager:1.0.0'

    implementation libs.dagger
    implementation libs.daggerAndroid
    implementation libs.daggerAndroidSupport
    implementation libs.lifecycle
    implementation libs.appCompat
    implementation libs.supportDesign
    implementation libs.recyclerView
    api libs.cardView
    implementation libs.fragment
    implementation libs.bindingCollectionAdapter
    implementation libs.bindingCollectionAdapterRecyclerView

    implementation libs.immutablesGson

    implementation libs.timber
    implementation libs.gson

    kapt libs.daggerCompiler

    kapt libs.daggerAndroidProcessor
    kapt libs.lifecycleCompiler
    implementation "biz.laenger.android:vpbs:0.0.6"

    api project(':trip-kit-booking')
    api project(':TripKitAndroid')
    api project(':TripKitAndroidUIModules:TripKitAndroidUIData')
    api project(':TripKitAndroidUIModules:TripKitAndroidUIDomain')
}

group = tripkitGroup
version = tripkitVersion

publishing {
    repositories {
        maven {
//      url = "file://${localMaven}"
            url = publishMavenUrl
            credentials {
                username = publishMavenUsername
                password = publishMavenToken
            }
        }
    }

    publications {
        mavenAar(MavenPublication) {
            groupId = group
            version = version
            from components.android
            pom {
                licenses {
                    license {
                        name = 'Commercial'
                    }
                }

            }
        }
    }
}

